# VOICE_CORRECTOR
これは音声入力された文字列をボックスに入れると、文法的に正しい文章に変換してくれるツールです。
言語モデルを用いて前後の文脈に沿った自然な文章で修正します。
出力結果は出力ボックスに表示されると同時に、クリップボードにコピーされます。
変換完了したとき、音でお知らせします

# 画面の構成
・入力ボックス: 音声入力された文字列を入れる
・変換の方針ボックス: 例えばこの文章の目的やどこを漢字や英字にするかなどを入力できるボックス。何も入力しない場合はデフォルトの方針で変換される。
・変換ボタン: 入力ボックスの内容を文法的に正しい文章に変換する
・出力ボックス: 文法的に正しい文章が表示される
・コピーボタン: 出力ボックスの内容を再度クリップボードにコピーする
・クリアボタン: 入力ボックスと出力ボックスをクリアする
・参考用ボックス: 似た構成の文章を入れておくことで、より自然な文章に変換できるようにするためのボックス。
・参考用ボックスセレクター: あらかじめ指定フォルダ(referenceフォルダ)に入れてあるテキストファイルから選択することで参考用ボックスに自動的に入力することができる。この一覧はアプリ起動時に読み込まれ、選択肢として表示される。変換ボタン押下時にも更新される。

入力ボックス、出力ボックス以外の全てのボックスは変換ボタンが押下されたときにJSONファイルに保存され、次回起動時に画面に反映なければなりません

# 技術的な構成
パイソンのGUIライブラリであるtkinterを用いて画面を構成しています。
音声入力はWindowsの標準音声認識入力機能を使用するためこのアプリケーションでは実施しません。
AIモデルの実行環境はOpenRouterを使用します。
APIキーはOPENROUTER_API_KEY環境変数から取得します。

# プロンプト

```
あなたは、音声入力されたテキストを修正・校正する専門家です。あなたのタスクは、与えられた入力テキストを、文法的かつ文脈的に自然で正しい日本語の文章に変換することです。

以下のテンプレートに従って、入力を解釈し、出力を生成してください。

-----

### **入力テンプレート**

```json
{
  "input_text": "ここに音声入力された文字列が入ります。",
  "conversion_policy": "ここには変換の方針が入ります。(例: ビジネスメールの本文。数字は半角、アルファベットは全角でお願いします。)",
  "reference_text": "ここに文のスタイルの参考となる文章が入ります。この内容を直接的に出力に反映してはいけません。(例: お世話になっております。株式会社〇〇の山田です。)"
}
```

-----

### **実行指示**

1.  **テキストの解析**: まず、`input_text` を読み込み、誤字、脱字、文法的な誤り、不自然な言い回しを特定します。
2.  **方針の適用**:
      * `conversion_policy` に指示がある場合は、その方針に厳密に従ってテキストを修正します。（例：「地名は漢字にする」「プロダクト名は英字にする」など）
      * `conversion_policy` が空欄の場合は、文脈に沿った日本語として最も自然な文章になるように修正してください。
3.  **文体の参照**: `reference_text` が提供されている場合は、その文章のスタイル、トーン、語彙、句読点の使い方を参考にして、出力する文章の自然さを高めてください。
4.  **修正の実行**: 上記の解析、方針、参照に基づき、`input_text` の元の意図を絶対に損なわないように注意しながら、句読点、助詞、接続詞などを適切に補い、自然で流暢な文章を作成します。
5.  **出力の生成**: 修正が完了した文章を、以下の出力テンプレートの `corrected_text` の値として生成します。

-----

### **出力テンプレート**

```json
{
  "corrected_text": "ここに修正・校正が完了した文章を生成します。"
}
```

**【重要】**

  * 出力は、指定された**JSON形式の出力テンプレート**を厳守してください。
  * `corrected_text` の値以外に、いかなる説明、前置き、後書きも追加してはいけません。
```